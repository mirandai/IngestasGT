<!DOCTYPE html>
<html lang="en" data-layout-decorate="~{fragments/layout}" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.24/css/uikit.min.css"/>
    <style>
        table {
            table-layout: fixed;
            width: 450px;
        }

        th, td {
            width: 100px;
            word-wrap: break-word;
        }

    </style>
    <title>Flows Cluster</title>
</head>
<body onload="agregar_caja();">
<div class="right_col" role="main" data-layout-fragment="content">
    <div class="">
        <div class="page-title">
            <div class="title_left">
                <h3></h3>
            </div>
        </div>
        <div class="clearfix"></div>

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <div class="panel panel-default">
                            <div class="panel-heading" style="height: 50px;">
                                <h3>Editando
                                    <small>/ parámetros</small>

                                </h3>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>

                    <div class="x_content">
                        <br/>

                        <div class="x_panel">
                            <div class="x_title">


                                <form id="demo-form2" data-parsley-validate
                                      data-th-action="@{/flows-cluster/save}"
                                      data-th-object="${flow}"
                                      method="post"
                                      class="form-horizontal form-label-left">


                                    <div class="form-group">
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input type="hidden" id="jobId" name="jobId"
                                                   data-th-field="*{jobId}"
                                                   readonly="readonly"
                                                   class="form-control col-md-7 col-xs-12">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-md-3 col-sm-3 col-xs-12"></div>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <label for="name">Nombre
                                                <span class="required">*</span>
                                            </label>
                                            <input type="text" id="name" required="required"
                                                   class="form-control col-md-7 col-xs-12"
                                                   readonly="readonly" name="name" data-th-field="*{name}">
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <script>
                                            var parametros = "[[${Variables2 }]]";
                                            var valoresSplit = parametros.split(',');
                                            var contenido = "";

                                            function agregar_caja() {
                                                if (parametros.length > 0) {

                                                    valoresSplit.forEach(myFunction1);

                                                    function myFunction1(value, index) {
                                                        contenido += "<label class=\"control-label col-md-3 col-sm-3 col-xs-12\" >" + "&" + [index + 1] + "</label>" + ": <input type=text class='form-control' autocomplete='off' style='width: 250px' value='" + valoresSplit[index] + "'  placeholder='Ingrese Valores' id='txt" + index + "' name='caja" + index + "'><br>"
                                                    }

                                                    /*for (var index in valoresSplit) {
                                                        console.log("En el índice '" + index + "' hay este valor: " + valoresSplit[index]);

                                                        contenido += "<label class=\"control-label col-md-3 col-sm-3 col-xs-12\" >" + "&" + [index] + "</label>" + ": <input type=text class='form-control' autocomplete='off' style='width: 250px' value='" + valoresSplit[index] + "'  placeholder='Ingrese Valores' id='txt" + index.toString() + "' name='caja" + index.toString() + "'><br>"
                                                    }*/
                                                }
                                                else {
                                                    valoresSplit.forEach(myFunction);

                                                    function myFunction(value, index) {
                                                        contenido += "<label class=\"control-label col-md-3 col-sm-3 col-xs-12\">" + "&" + [index + 1] + "</label>" + ": <input type=text class='form-control' autocomplete='off' style='width: 250px'   placeholder='Ingrese Valores' id='txt" + index + "' name='caja" + index + "'><br>"
                                                    }

                                                    /* for (var index in valoresSplit) {
                                                         var sum = 1;
                                                         console.log("En el índice '" + index + "' hay este valor: " + valoresSplit[index]);
                                                         contenido += "<label class=\"control-label col-md-3 col-sm-3 col-xs-12\">" + "&" + [index] + "</label>" + ": <input type=text class='form-control' autocomplete='off' style='width: 250px'   placeholder='Ingrese Valores' id='txt" + index.toString() + "' name='caja" + index.toString() + "'><br>"
                                                     }*/
                                                }
                                                document.getElementById("cajas").innerHTML = contenido;
                                                var variable = document.getElementById("cajas").value;
                                            }

                                            //Inicia Función getValueText, Obtener el valor que hay en textbox.
                                            function getValueText() {
                                                var mensaje = '';


                                                for (index in valoresSplit) {
                                                    if (index == valoresSplit.length - 1) {
                                                        mensaje += document.getElementById("txt" + index.toString()).value;
                                                        // mensaje += document.getElementById("txt" + index.toString()).value;
                                                        // alert('1: ' + mensaje);
                                                    } else {
                                                        mensaje += document.getElementById("txt" + index.toString()).value + ',';
                                                        // mensaje += document.getElementById("txt" + index.toString()).value + ',';
                                                        //  alert('2: ' + mensaje);
                                                    }
                                                }

                                                document.getElementById('variables2').setAttribute('value', mensaje);

                                                //  alert('valor en textbox : ' + mensaje);

                                            }
                                        </script>
                                    </div>


                                    <div class="form-group">
                                        <div class="control-label col-md-3 col-sm-3 col-xs-12"/>
                                        <div class="col-md-6 col-sm-6 col-xs-12"></div>
                                    </div>

                                    <div class="form-group">
                                        <div class="control-label col-md-3 col-sm-3 col-xs-12">
                                            <div id="cajas">
                                                <input type="hidden"
                                                       class="form-control"
                                                       style="width:250px">
                                            </div>
                                            <div class="ln_solid"></div>
                                            <div class="control-label col-md-3 col-sm-3 col-xs-12">
                                                <button type="submit"
                                                        data-toggle="modal"
                                                        data-target=".bs-example-modal-sm"
                                                        class="btn btn-success"
                                                        value="create"
                                                        onclick="getValueText();">Guardar
                                                </button>
                                            </div>


                                            <div>
                                                <input type="hidden"
                                                       id="variables2"
                                                       name="variables2"
                                                       data-th-field="*{variables2}"
                                                       class="form-control"
                                                       style="width:250px">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Modal que Despliga Indicador de Espera-->
        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-body">
                        <span style="font-size: 35px; color: #00aeef" class="fa fa-spinner fa-spin"></span>
                        <strong>Cargando...</strong>
                    </div>
                </div>
            </div>
        </div>
        <!--Fin Modal-->
    </div>
</div>
</body>
</html>


